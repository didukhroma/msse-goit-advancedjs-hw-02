{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Settings for iziToast\niziToast.settings({\n  timeout: 10000,\n  position: 'topRight',\n  onOpening: function (instance, toast) {\n    console.info('callback abriu!');\n  },\n});\n\nconst formRef = document.querySelector('.form');\n\nformRef.addEventListener('submit', handlerSubmit);\n\nfunction handlerSubmit(e) {\n  e.preventDefault();\n  const formData = {\n    firstDelay: e.currentTarget.elements.delay.value,\n    step: e.currentTarget.elements.step.value,\n    amount: e.currentTarget.elements.amount.value,\n  };\n\n  let promiseIdx = 1;\n  let delay = Number(formData.firstDelay);\n  while (promiseIdx <= formData.amount) {\n    createPromise(promiseIdx, delay)\n      .then(value =>\n        iziToast.show({\n          title: value,\n          backgroundColor: 'green',\n        })\n      )\n      .catch(error =>\n        iziToast.show({\n          title: error,\n          backgroundColor: 'red',\n        })\n      );\n\n    promiseIdx += 1;\n    delay += Number(formData.step);\n  }\n}\n\nfunction createPromise(position, delay) {\n  const shouldResolve = Math.random() > 0.3;\n\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (shouldResolve) {\n        resolve(`✅ Fulfilled promise ${position} in ${delay}ms`);\n      } else {\n        reject(`❌ Rejected promise ${position} in ${delay}ms`);\n      }\n    }, delay);\n  });\n}\n"],"names":["iziToast","instance","toast","formRef","handlerSubmit","formData","promiseIdx","delay","createPromise","value","error","position","shouldResolve","resolve","reject"],"mappings":"mIAIAA,EAAS,SAAS,CAChB,QAAS,IACT,SAAU,WACV,UAAW,SAAUC,EAAUC,EAAO,CACpC,QAAQ,KAAK,iBAAiB,CAC/B,CACH,CAAC,EAED,MAAMC,EAAU,SAAS,cAAc,OAAO,EAE9CA,EAAQ,iBAAiB,SAAUC,CAAa,EAEhD,SAASA,EAAc,EAAG,CACxB,EAAE,eAAc,EAChB,MAAMC,EAAW,CACf,WAAY,EAAE,cAAc,SAAS,MAAM,MAC3C,KAAM,EAAE,cAAc,SAAS,KAAK,MACpC,OAAQ,EAAE,cAAc,SAAS,OAAO,KAC5C,EAEE,IAAIC,EAAa,EACbC,EAAQ,OAAOF,EAAS,UAAU,EACtC,KAAOC,GAAcD,EAAS,QAC5BG,EAAcF,EAAYC,CAAK,EAC5B,KAAKE,GACJT,EAAS,KAAK,CACZ,MAAOS,EACP,gBAAiB,OAC3B,CAAS,CACF,EACA,MAAMC,GACLV,EAAS,KAAK,CACZ,MAAOU,EACP,gBAAiB,KAC3B,CAAS,CACT,EAEIJ,GAAc,EACdC,GAAS,OAAOF,EAAS,IAAI,CAEjC,CAEA,SAASG,EAAcG,EAAUJ,EAAO,CACtC,MAAMK,EAAgB,KAAK,OAAM,EAAK,GAEtC,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CACtC,WAAW,IAAM,CACXF,EACFC,EAAQ,uBAAuBF,QAAeJ,KAAS,EAEvDO,EAAO,sBAAsBH,QAAeJ,KAAS,CAExD,EAAEA,CAAK,CACZ,CAAG,CACH"}